<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="img/logomark.png" />
    <title>Visit Aljanub</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="/css/style.css" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
      rel="stylesheet"
    />
    <!-- Fonts -->
  </head>
  <body class="bg-tertiary">
    <!-- Header -->
    <nav
      class="navbar navbar-expand-lg small shadow-sm custom-nav py-3"
      style="background-color: black"
    >
      <div class="container">
        <a href="<%= homeLink %>" class="navbar-brand">
          <img
            src="img/Asset 1.svg"
            width="80"
            height="auto"
            alt="website image"
          />
        </a>
        <button
          type="button"
          class="navbar-toggler bg-light"
          data-bs-toggle="collapse"
          data-bs-target="#blog-navbar"
          aria-controls="blog-navbar"
          aria-expanded="false"
          aria-label="Toggle Navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="blog-navbar">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <!-- Dropdown hover button -->
            <div class="dropdown">
              <li class="nav-item">
                <a
                  href="#"
                  class="nav-link text-light fw-semibold anchor-h"
                  >Destination</a
                >
              </li>
              <ul class="dropdown-menue mt-1">
                <li><a href="/dest-1" class="fs-6">Jazan</a></li>
                <li><a href="/dest-2" class="fs-6">Asir</a></li>
                <li><a href="/dest-3" class="fs-6">Albaha</a></li>
                <li><a href="/dest-4" class="fs-6">Najran</a></li>
              </ul>
            </div>
            <!-- Dropdown hover button -->
            <li class="nav-item">
              <a
                href="/trip-planer"
                class="nav-link text-light fw-semibold anchor-h"
                >Trip planer</a
              >
            </li>
            <li class="nav-item">
              <a
                href="/tour-guides"
                class="nav-link text-light fw-semibold anchor-h"
                >Tour guid</a
              >
            </li>
            <li class="nav-item">
              <a
                href="/events"
                class="nav-link text-light fw-semibold anchor-h"
                >Calendar</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Header -->

    <section class="tuor-guide my-5">
      <div class="container">
        <!-- Filter Nav -->
          <%- include("partial/messages.ejs") %>
          <form action="/tour-guides" method="GET" class="row">
            <div class="col-md-3">
              <label for="dest" class="form-label">Destination</label>
              <select class="form-select" id="dest" name="location">
                <option value="" selected>All</option>
                <% filters.locations.forEach(loc =>{%>
                <option value="<%= loc %>" <%= selectedFilters.location === loc ? "selected" : "" %> ><%= loc %></option>
                <% }); %>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label" for="cate">Category</label>
              <select class="form-select" id="cate" name="category">
                <option value="" selected>All</option>
                <% filters.categories.forEach(cat =>{%>
                <option value="<%= cat %>" <%= selectedFilters.category === cat ? "selected" : "" %> > <%= cat %> </option>
                <% }); %>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label" for="lang">Language</label>
              <select class="form-select" id="lang" name="language">
                <option value="" selected>All</option>
                <% filters.languages.forEach(lang => {%>
                  <option value="<%= lang %>" <%= selectedFilters.language === lang ? "selected" : "" %> ><%= lang %></option>
                <% }); %>
              </select>
            </div>
            <div class="col-md-3 d-flex align-items-end justify-content-end">
              <button type="submit" class="btn btn-outline-dark w-100">
                Apply Filters
              </button>
            </div>
          </form>
        <!-- Filter Nav -->

        <!-- Tour Guide Cards -->
        <div class="row mt-3">
          <% if(tourGuides.length > 0){%> <% tourGuides.forEach(guide=>{ %>
          <div class="col-md-4 t-card">
            <a
              href="/tour-guides/<%= guide._id %>"
              class="text-decoration-none"
            >
              <div class="card position-relative">
                <!-- Rating -->
                <span
                  class="position-absolute top-50 translate-middel fs-6 blur-card-filter rounded-1 p-1 d-inline-flex align-items-center"
                >
                <% if(guide.reviewCount > 0){ %>
                  <% for (let i = 1; i <= 5; i++) { %>
                    <% if (i <= Math.round(guide.rating)) { %>
                      <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="12"
                    height="12"
                    class="mx-1"
                    fill="#c5c51cf5"
                    class="bi bi-star-fill"
                    viewBox="0 0 16 16"
                  >
                    <path
                      d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"
                    />
                      </svg>
                    <% } else { %>
                      <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="12"
                    height="12"
                    class="mx-1"
                    fill="#c5c51cf5"
                    class="bi bi-star-fill"
                    viewBox="0 0 16 16"
                  >
                    <path
                      d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"
                    />
                      </svg>
                    <% } %>
                    <% } %>
                    <span class="text-secondary"
                    >(<%= guide.reviewCount %>)
                    </span>
                  <% }else{ %>
                    <span class="text-secondary"
                    >(0)
                    </span>
                  <% } %>
                </span>
                <!-- Rating -->
                <img src="<%= guide.profileImage %>" class="card-img-top" alt="tour guid image" />
                <div class="card-body">
                  <span class="fs-5"><%= guide.name %></span>
                  <p class="fs-5">
                    <%= guide.description.substring(0, 100) %>...
                  </p>
                  <span class="fs-5"
                    ><%= guide.rate %>
                    <span class="d-inline-flex align-items-center">
                      <img
                        src="img/Saudi_Riyal_Symbol.svg.png"
                        width="14"
                        alt="" /></span
                  ></span>
                  <p class="mt-1">
                    <% guide.categories.forEach(category => { %>
                    <span class="text-bg-dark p-2 rounded-pill badge"
                      ><%= category %></span
                    >
                    <% }); %>
                    <span class="text-bg-dark p-2 rounded-pill badge"
                      ><%= guide.location %></span
                    >
                  </p>
                </div>
              </div>
            </a>
          </div>
          <% }); %> <%}else{ %>
          <div class="col-12">
            <div class="alert alert-info">
              No tour guides match your criteria. Please try different filters.
            </div>
          </div>
          <% } %>
        </div>
        <!-- Tour Guide Cards -->
      </div>
    </section>

    <!-- Footer -->
    <footer class="container-fluid p-3 p-md-5">
      <div class="row mt-3">
        <div
          class="col-md-12 d-flex justify-content-md-end justify-content-center p-0"
        >
          <ul class="list-unstyled d-flex gap-5 m-0 f-ul">
            <li>
              <a href="#" class="text-light text-decoration-none">Contact us</a>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="14"
                height="14"
                fill="#fff"
                class="bi bi-arrow-up-right"
                viewBox="0 0 16 16"
              >
                <path
                  fill-rule="evenodd"
                  d="M14 2.5a.5.5 0 0 0-.5-.5h-6a.5.5 0 0 0 0 1h4.793L2.146 13.146a.5.5 0 0 0 .708.708L13 3.707V8.5a.5.5 0 0 0 1 0z"
                />
              </svg>
            </li>
            <li>
              <a href="#" class="text-light text-decoration-none"
                >Follow us instagram</a
              >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="14"
                height="14"
                fill="#fff"
                class="bi bi-arrow-up-right"
                viewBox="0 0 16 16"
              >
                <path
                  fill-rule="evenodd"
                  d="M14 2.5a.5.5 0 0 0-.5-.5h-6a.5.5 0 0 0 0 1h4.793L2.146 13.146a.5.5 0 0 0 .708.708L13 3.707V8.5a.5.5 0 0 0 1 0z"
                />
              </svg>
            </li>
            <li>
              <p class="text-light">
                Copy &copy; <span class="year">2020</span> All rights are
                reserverd
              </p>
            </li>
          </ul>
        </div>
      </div>
    </footer>
    <!-- Footer -->

    <script>
      // update the copyright year
      const yearEl = document.querySelector(".year");
      const currentYear = new Date().getFullYear();
      yearEl.textContent = currentYear;
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
