<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="img/logomark.png" />
    <title>Visit Aljanub</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="/css/style.css" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
      rel="stylesheet"
    />
    <!-- Fonts -->
  </head>
  <body class="bg-tertiary">
    <!-- Header -->
    <nav
      class="navbar navbar-expand-lg small shadow-sm custom-nav py-3"
      style="background-color: black"
    >
      <div class="container">
        <a href="<%= homeLink %>" class="navbar-brand">
          <img
            src="img/Asset 1.svg"
            width="80"
            height="auto"
            alt="website image"
          />
        </a>
        <button
          type="button"
          class="navbar-toggler bg-light"
          data-bs-toggle="collapse"
          data-bs-target="#blog-navbar"
          aria-controls="blog-navbar"
          aria-expanded="false"
          aria-label="Toggle Navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="blog-navbar">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <!-- Dropdown hover button -->
            <div class="dropdown">
              <li class="nav-item">
                <a href="#" class="nav-link text-light fw-semibold anchor-h"
                  >Destination</a
                >
              </li>
              <ul class="dropdown-menue mt-1">
                <li><a href="/dest-1" class="fs-6">Jazan</a></li>
                <li><a href="/dest-2" class="fs-6">Asir</a></li>
                <li><a href="/dest-3" class="fs-6">Albaha</a></li>
                <li><a href="/dest-4" class="fs-6">Najran</a></li>
              </ul>
            </div>
            <!-- Dropdown hover button -->
            <li class="nav-item">
              <a
                href="/trip-planer"
                class="nav-link text-light fw-semibold anchor-h"
                >Trip planer</a
              >
            </li>
            <li class="nav-item">
              <a
                href="/tour-guides"
                class="nav-link text-light fw-semibold anchor-h"
                >Tour guid</a
              >
            </li>
            <li class="nav-item">
              <a href="/events" class="nav-link text-light fw-semibold anchor-h"
                >Calendar</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Header -->

    <!-- Custom Trip Plans -->
    <section class="trip-plan my-5">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <div class="col-md-4">
                <label class="form-label" for="dest">Destination</label>
                <select class="form-select" id="dest">
                  <option value="all" selected>All</option>
                  <option value="jazan">Jazan</option>
                  <option value="asir-r">Asir Region</option>
                  <option value="albaha">Albaha</option>
                  <option value="najran">Najran</option>
                </select>
              </div>
              <div class="col-md-4">
                <label class="form-label" for="cate">Categories</label>
                <select class="form-select" id="cate">
                  <option value="all" selected>All</option>
                  <option value="nature">Nature</option>
                  <option value="adv">Adventure</option>
                  <option value="cul">Culture</option>
                  <option value="sho">Shopping</option>
                </select>
              </div>
            </div>
            <div class="row mt-3">
              <div class="accordion" id="allPlans">
                <div
                  class="accordion-item t-acord"
                  data-cate="nature"
                  data-dest="asir-r"
                >
                  <h2 class="accordion-header">
                    <button
                      class="accordion-button"
                      type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#collapseOne"
                      aria-controls="collapseOne"
                      aria-expanded="true"
                    >
                      Plane 1
                    </button>
                  </h2>
                  <div
                    id="collapseOne"
                    class="accordion-collapse collapse show"
                    data-bs-parent="#allPlans"
                  >
                    <div class="accordion-body">
                      <p>
                        <strong>Ideal for:</strong> Hikers, nature lovers, and
                        thrill-seekers
                      </p>
                      <h5>Highlights:</h5>
                      <ul>
                        <li>Explore the breathtaking Asir National Park</li>
                        <li>Ride the cable car to Al-Soudah Mountain</li>
                        <li>Paragliding over Abhaâ€™s scenic landscapes</li>
                        <li>
                          Discover hidden villages like Rijal Almaa with
                          stunning architecture
                        </li>
                        <li>Enjoy cool weather and panoramic views</li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div
                  class="accordion-item t-acord"
                  data-cate="cul"
                  data-dest="najran"
                >
                  <h2 class="accordion-header">
                    <button
                      class="accordion-button collapsed"
                      type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#collapseTwo"
                      aria-controls="collapseTwo"
                      aria-expanded="false"
                    >
                      Plane 2
                    </button>
                  </h2>
                  <div
                    id="collapseTwo"
                    class="accordion-collapse collapse"
                    data-bs-parent="#allPlans"
                  >
                    <div class="accordion-body">
                      <p>
                        <strong>Ideal for:</strong> History buffs and cultural
                        travelers
                      </p>
                      <h5>Highlights:</h5>
                      <ul>
                        <li>Visit the historic Najran Fort</li>
                        <li>Explore the ancient ruins of Al-Ukhdood</li>
                        <li>Tour the traditional mud-brick villages</li>
                        <li>Discover local crafts at the Najran Souq</li>
                        <li>Enjoy authentic Najrani cuisine</li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div
                  class="accordion-item t-acord"
                  data-cate="adv"
                  data-dest="jazan"
                >
                  <h2 class="accordion-header">
                    <button
                      class="accordion-button collapsed"
                      type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#collapseThree"
                      aria-controls="collapseThree"
                      aria-expanded="false"
                    >
                      Plane 3
                    </button>
                  </h2>
                  <div
                    id="collapseThree"
                    class="accordion-collapse collapse"
                    data-bs-parent="#allPlans"
                  >
                    <div class="accordion-body">
                      <p>
                        <strong>Ideal for:</strong> Beachgoers and island lovers
                      </p>
                      <h5>Highlights:</h5>
                      <ul>
                        <li>Relax on the beaches of Farasan Islands</li>
                        <li>Snorkeling and diving in the Red Sea</li>
                        <li>Visit the heritage village in Jazan city</li>
                        <li>
                          Discover the mangrove forests and coastal wildlife
                        </li>
                        <li>Taste fresh seafood and tropical fruits</li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div
                  class="accordion-item t-acord"
                  data-cate="cul"
                  data-dest="albaha"
                >
                  <h2 class="accordion-header">
                    <button
                      class="accordion-button collapsed"
                      type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#collapseFour"
                      aria-controls="collapseFour"
                      aria-expanded="false"
                    >
                      Plane 4
                    </button>
                  </h2>
                  <div
                    id="collapseFour"
                    class="accordion-collapse collapse"
                    data-bs-parent="#allPlans"
                  >
                    <div class="accordion-body">
                      <p>
                        <strong>Ideal for:</strong> Families and laid-back
                        travelers
                      </p>
                      <h5>Highlights:</h5>
                      <ul>
                        <li>Stroll through the lush Raghadan Forest Park</li>
                        <li>Explore the mysterious Khairah Forest Caves</li>
                        <li>Visit ancient villages like Dhee Ain</li>
                        <li>Enjoy scenic drives along mountain roads</li>
                        <li>
                          Experience traditional markets and family-friendly
                          parks
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
              <div class="text-danger text-center fs-4" id="noMtchM">
                No Match
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Custom Trip Plans -->

    <!-- plan with Ai -->
    <section class="chat-ai my-5">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <div class="list-group small">
              <div
                class="list-group-item text-light d-flex align-items-center justify-content-center px-2 py-3 fs-4"
                style="background-color: #92a50e"
              >
                Chat With AI
              </div>
              <div
                class="chatbot-message list-group-item overflow-y-scroll"
                id="chatbot-message"
              >
                <!-- Chat will appear here -->
              </div>
              <form
                id="chat-form"
                action="/chat"
                class="list-group-item"
                style="border-color: #92a50e"
              >
                <div class="row">
                  <div class="col-md-9 pe-0">
                    <input
                      id="user-input"
                      type="text"
                      class="form-control form-control-sm p-2"
                      placeholder="Enter a Massage"
                      style="border-color: #92a50e"
                    />
                  </div>
                  <div class="col-md-2">
                    <button
                      id="send-btn"
                      type="submit"
                      class="btn btn-sm p-2 btn-h w-100"
                    >
                      Send
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- plan with Ai -->

    <!-- Footer -->
    <footer class="container-fluid p-3 p-md-5">
      <div class="row mt-3">
        <div
          class="col-md-12 d-flex justify-content-md-end justify-content-center p-0"
        >
          <ul class="list-unstyled d-flex gap-5 m-0 f-ul">
            <li>
              <a href="#" class="text-light text-decoration-none">Contact us</a>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="14"
                height="14"
                fill="#fff"
                class="bi bi-arrow-up-right"
                viewBox="0 0 16 16"
              >
                <path
                  fill-rule="evenodd"
                  d="M14 2.5a.5.5 0 0 0-.5-.5h-6a.5.5 0 0 0 0 1h4.793L2.146 13.146a.5.5 0 0 0 .708.708L13 3.707V8.5a.5.5 0 0 0 1 0z"
                />
              </svg>
            </li>
            <li>
              <a href="#" class="text-light text-decoration-none"
                >Follow us instagram</a
              >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="14"
                height="14"
                fill="#fff"
                class="bi bi-arrow-up-right"
                viewBox="0 0 16 16"
              >
                <path
                  fill-rule="evenodd"
                  d="M14 2.5a.5.5 0 0 0-.5-.5h-6a.5.5 0 0 0 0 1h4.793L2.146 13.146a.5.5 0 0 0 .708.708L13 3.707V8.5a.5.5 0 0 0 1 0z"
                />
              </svg>
            </li>
            <li>
              <p class="text-light">
                Copy &copy; <span class="year">2020</span> All rights are
                reserverd
              </p>
            </li>
          </ul>
        </div>
      </div>
    </footer>
    <!-- Footer -->
    <script>
      // update the copyright year
      const yearEl = document.querySelector(".year");
      const currentYear = new Date().getFullYear();
      yearEl.textContent = currentYear;

      // choose perefect plan for your trip
      function filtterplan() {
        let dest = document.getElementById("dest").value;
        let cate = document.getElementById("cate").value;
        let contents = document.querySelectorAll(".t-acord");
        let noMatch = document.getElementById("noMtchM");
        // creat a variable for the match value
        let matchFound = false;

        contents.forEach((content) => {
          let matchCate = cate === "all" || content.dataset.cate === cate;
          let matchDest = dest === "all" || content.dataset.dest === dest;

          if (matchCate && matchDest) {
            content.style.display = "block";
            matchFound = true;
          } else {
            content.style.display = "none";
          }
        });
        noMatch.style.display = matchFound ? "none" : "block";
      }

      // calling the selection options
      document.getElementById("dest").addEventListener("change", filtterplan);
      document.getElementById("cate").addEventListener("change", filtterplan);

      filtterplan();

      // chatbot
      const chatHistory = document.getElementById("chatbot-message");
      const userInput = document.getElementById("user-input");
      const form = document.getElementById("chat-form");

      async function sendMessage() {
        const userMessage = userInput.value;
        userInput.value = ""; // Clear input field
        console.log(userMessage);
        try {
          const response = await fetch("/chat", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ userInput: userMessage }),
          });

          const data = await response.json();
          console.log(data);
          const botMessage = data.response;
          console.log(botMessage);
          // Add chat message to the chat history
          chatHistory.innerHTML += `<div class="user-message message">${userMessage}</div>`;
          chatHistory.innerHTML += `<div class="bot-message message">${botMessage}</div>`;

          // Scroll to the bottom of the chat history
          chatHistory.scrollTop = chatHistory.scrollHeight;
        } catch (error) {
          console.error("Error:", error);
          // Handle errors gracefully, e.g., display an error message to the user
        }
      }

      form.addEventListener("submit", (event) => {
        event.preventDefault(); // Prevent form submission
        sendMessage();
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
